import React, { useState } from 'react';
import {
  courseStartQuarters,
  courseStartYears,
  degrees,
  fieldsOfInterest,
  admissionStatuses,
  allCountries,
  universities
} from '../../constants';
import './FurtherEducationSection.css';

const FurtherEducationSection = ({
  lead,
  setLead,
  handleChange,
  handleDateChange,
  renderSelectField,
  renderAutocompleteField,
  handleShowPrimeBanks,
  primeBankList,
  fetchedForUniversity
}) => {
  return (
    <div className="section-block">
      <h1 className="ed-details-section-title">ðŸŽ“ Further Education Details</h1>

      <div className="further-education-fields">
        {renderSelectField("courseStartMonth", "Course Start Month", lead.courseStartMonth, handleChange, courseStartQuarters)}
        {renderSelectField("courseStartYear", "Course Start Year", lead.courseStartYear, handleChange, courseStartYears)}
        {renderSelectField("degree", "Degree", lead.degree, handleChange, degrees)}
        {renderSelectField("fieldOfInterest", "Field of Interest", lead.fieldOfInterest, handleChange, fieldsOfInterest)}
        {renderAutocompleteField("interestedCountries", "Interested Countries", lead.interestedCountries, handleChange, allCountries)}
        {renderSelectField("admissionStatus", "Admission Status", lead.admissionStatus, handleChange, admissionStatuses)}

        {lead.admissionStatus === 'Applied - No Admit Yet' && (
          <div className="date-field" style={{ width: '100%' }}>
            <label>Expected Admit Date</label>
            <input
              type="date"
              value={lead.expectedAdmitDate ? new Date(lead.expectedAdmitDate).toISOString().split('T')[0] : ''}
              onChange={(e) =>
                handleDateChange('expectedAdmitDate', e.target.value ? new Date(e.target.value) : null)
              }
            />
          </div>
        )}

        {lead.admissionStatus === 'Not Yet Applied' && (
          <div className="date-field" style={{ width: '100%' }}>
            <label>Expected Application Date</label>
            <input
              type="date"
              value={lead.expectedApplicationDate ? new Date(lead.expectedApplicationDate).toISOString().split('T')[0] : ''}
              onChange={(e) =>
                handleDateChange('expectedApplicationDate', e.target.value ? new Date(e.target.value) : null)
              }
            />
          </div>
        )}

        {renderAutocompleteField("admittedUniversities", "Admitted Universities", lead.admittedUniversities, handleChange, universities)}
      </div>

      <div className="form-section_ed">
  <fieldset>
    <legend>Has the student already approached any bank? *</legend>

    <div className="radio-group_ed">
      <label>
        <input
          type="radio"
          name="approachedAnyBank"
          value="true"
          checked={lead.approachedAnyBank === true}
          onChange={handleChange}
        />
        Yes
      </label>

      <label>
        <input
          type="radio"
          name="approachedAnyBank"
          value="false"
          checked={lead.approachedAnyBank === false}
          onChange={handleChange}
        />
        No
      </label>
    </div>
  </fieldset>

  {lead.approachedAnyBank && (
    <div className="bank-section_ed">
      <label className="section-label_ed">Approached Banks</label>

      {lead.approachedBanks.map((bank, index) => (
        <div key={index} className="bank-card_ed">

          <div className="bank-row_ed">
            <input
              type="text"
              placeholder="Bank Name"
              value={bank.bankName}
              onChange={(e) => {
                const newBanks = [...lead.approachedBanks];
                newBanks[index].bankName = e.target.value;
                setLead(prev => ({ ...prev, approachedBanks: newBanks }));
              }}
            />

            <button
              type="button"
              className="remove-btn_ed"
              onClick={() => {
                const newBanks = lead.approachedBanks.filter((_, i) => i !== index);
                setLead(prev => ({ ...prev, approachedBanks: newBanks }));
              }}
            >
              Remove
            </button>
          </div>

          <fieldset>
            <legend>Has the file been logged in?</legend>

            <div className="radio-group_ed">
              <label>
                <input
                  type="radio"
                  name={`fileLoggedIn-${index}`}
                  value="true"
                  checked={bank.fileLoggedIn === true}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].fileLoggedIn = e.target.value === 'true';
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                Yes
              </label>

              <label>
                <input
                  type="radio"
                  name={`fileLoggedIn-${index}`}
                  value="false"
                  checked={bank.fileLoggedIn === false}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].fileLoggedIn = e.target.value === 'true';
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                No
              </label>
            </div>
          </fieldset>

          {bank.fileLoggedIn === false && (
            <div className="info-box_ed">
              <h4>Advantages of going with Justap:</h4>
              <ul>
                <li>Direct tie-ups for faster processing</li>
                <li>Expert guidance reducing rejection chances</li>
                <li>Dedicated loan advisor</li>
              </ul>
            </div>
          )}

          {bank.fileLoggedIn === true && (
            <fieldset>
              <legend>Has the loan been sanctioned?</legend>

              <div className="radio-group_ed">
                <label>
                  <input
                    type="radio"
                    name={`loanSanctioned-${index}`}
                    value="true"
                    checked={bank.loanSanctioned === true}
                    onChange={(e) => {
                      const newBanks = [...lead.approachedBanks];
                      newBanks[index].loanSanctioned = e.target.value === 'true';
                      setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                    }}
                  />
                  Yes
                </label>

                <label>
                  <input
                    type="radio"
                    name={`loanSanctioned-${index}`}
                    value="false"
                    checked={bank.loanSanctioned === false}
                    onChange={(e) => {
                      const newBanks = [...lead.approachedBanks];
                      newBanks[index].loanSanctioned = e.target.value === 'true';
                      setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                    }}
                  />
                  No
                </label>
              </div>
            </fieldset>
          )}

          {bank.loanSanctioned === true && (
            <div className="sanction-box_ed">
              <h4>Sanction Details</h4>

              <div className="form-grid_ed">
                <input
                  type="number"
                  placeholder="Loan Amount"
                  value={bank.sanctionDetails?.loanAmount || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, loanAmount: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="number"
                  step="0.01"
                  placeholder="Rate of Interest (%)"
                  value={bank.sanctionDetails?.rateOfInterest || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, rateOfInterest: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="number"
                  placeholder="Processing Fee"
                  value={bank.sanctionDetails?.processingFee || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, processingFee: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="text"
                  placeholder="Insurance"
                  value={bank.sanctionDetails?.insurance || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, insurance: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="text"
                  placeholder="PSM"
                  value={bank.sanctionDetails?.psm || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, psm: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="text"
                  placeholder="Co-Applicant"
                  value={bank.sanctionDetails?.coApplicant || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, coApplicant: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
              </div>

              <fieldset>
                <legend style={{paddingTop: '10px'}}>Type of Loan</legend>
                <div className="radio-group_ed">
                  <label>
                    <input
                      type="radio"
                      name={`typeOfLoan-${index}`}
                      value="secured"
                      checked={bank.sanctionDetails?.typeOfLoan === 'secured'}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, typeOfLoan: e.target.value };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    Secured Loan
                  </label>
                  <label>
                    <input
                      type="radio"
                      name={`typeOfLoan-${index}`}
                      value="unsecured"
                      checked={bank.sanctionDetails?.typeOfLoan === 'unsecured'}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, typeOfLoan: e.target.value };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    Unsecured Loan
                  </label>
                </div>
              </fieldset>

              <fieldset>
                <legend style={{paddingTop: '10px'}}>PF Paid?</legend>
                <div className="radio-group_ed">
                  <label>
                    <input
                      type="radio"
                      name={`pfPaid-${index}`}
                      value="true"
                      checked={bank.sanctionDetails?.pfPaid === true}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, pfPaid: e.target.value === 'true' };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    Yes
                  </label>
                  <label>
                    <input
                      type="radio"
                      name={`pfPaid-${index}`}
                      value="false"
                      checked={bank.sanctionDetails?.pfPaid === false}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, pfPaid: e.target.value === 'true' };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    No
                  </label>
                </div>
              </fieldset>

              <fieldset>
                <legend style={{paddingTop: '10px'}}>Disbursement Done?</legend>
                <div className="radio-group_ed">
                  <label>
                    <input
                      type="radio"
                      name={`disbursementDone-${index}`}
                      value="true"
                      checked={bank.sanctionDetails?.disbursementDone === true}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, disbursementDone: e.target.value === 'true' };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    Yes
                  </label>
                  <label>
                    <input
                      type="radio"
                      name={`disbursementDone-${index}`}
                      value="false"
                      checked={bank.sanctionDetails?.disbursementDone === false}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, disbursementDone: e.target.value === 'true' };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    No
                  </label>
                </div>
              </fieldset>
            </div>
          )}

          {bank.loanSanctioned === false && (
            <div className="benefits-box_ed">
              <div className="disadvantages_ed">
                <h3>Disadvantages of {bank.bankName}</h3>
              </div>
              <div className="advantages_ed">
                <h3>Advantages of JTC</h3>
              </div>
            </div>
          )}

        </div>
      ))}

      <button
        type="button"
        className="add-btn_ed"
        onClick={() => {
          const newBanks = [
            ...lead.approachedBanks,
            { bankName: '', fileLoggedIn: false, loanSanctioned: false, sanctionDetails: {} }
          ];
          setLead(prev => ({ ...prev, approachedBanks: newBanks }));
        }}
      >
        + Add Bank
      </button>
    </div>
  )}
</div>

          


      <div className="info-box">
        Enter a university and click the button below to check the prime university list.
      </div>

      <button className="prime-btn" onClick={handleShowPrimeBanks}>
        PRIME UNIVERSITY LIST
      </button>

      {primeBankList.length > 0 && (
        <div className="table-wrapper">
          <h4>Prime Banks for "{fetchedForUniversity}"</h4>

          <table>
            <thead>
              <tr>
                <th>Bank Name</th>
                <th>Max Loan Amount</th>
              </tr>
            </thead>
            <tbody>
              {primeBankList.map((bank, index) => (
                <tr key={index}>
                  <td>{bank.bankName}</td>
                  <td className="amount">{bank.maxLoanAmount}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      )}
    </div>
  );
};



export default FurtherEducationSection;
.section-block {
  padding: 16px;
  background: #ffffff;
  border-radius: 8px;
}

.ed-details-section-title {
  font-size: 24px;
  font-weight: bold;
  color: #512967;
  margin-bottom: 16px;
}

.further-education-fields {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 12px;
}

.date-field label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 4px;
}

.date-field input {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

.info-box {
  margin-top: 16px;
  padding: 12px;
  background: #ebf5ff;
  border-left: 4px solid #3b82f6;
  color: #1e40af;
  border-radius: 6px;
}

.prime-btn {
  margin-top: 12px;
  padding: 10px 16px;
  background: #f59e0b;
  color: #ffffff;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
}

.prime-btn:hover {
  background: #d97706;
}

.table-wrapper {
  margin-top: 20px;
}

.table-wrapper h4 {
  margin-bottom: 10px;
  font-size: 18px;
}

.table-wrapper table {
  width: 100%;
  border-collapse: collapse;
}

.table-wrapper th,
.table-wrapper td {
  padding: 10px;
  border: 1px solid #ddd;
  text-align: left;
}

.table-wrapper th {
  background: #f9fafb;
  font-weight: 600;
}

.amount {
  text-align: right;
}


/* Force autocomplete fields to match grid width ONLY in this section */

.further-education-fields > div {
  width: 100%;
}

.further-education-fields .MuiAutocomplete-root {
  width: 100%;
}

.further-education-fields .MuiFormControl-root {
  width: 100%;
}

.benifits_boxes{
   display:flex;
   flex-direction:row;
}

.button-container_ed {
  margin-top: 12px;
  display: flex;
  justify-content: center;
}

/* Blinking and Moving Button */
@keyframes blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.4;
  }
}

@keyframes moveUpDown {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.modal-trigger-btn_ed {
  background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
  color: #ffffff;
  border: 2px solid #f59e0b;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 700;
  font-size: 16px;
  cursor: pointer;
  animation: blink 1.2s ease-in-out infinite, moveUpDown 1.5s ease-in-out infinite;
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
  transition: all 0.3s ease;
}

.modal-trigger-btn_ed:hover {
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.6);
  transform: scale(1.05);
}

/* Modal Overlay */
.modal-overlay_ed {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Modal Content */
.modal-content_ed {
  background: #ffffff;
  border-radius: 12px;
  padding: 32px;
  max-width: 800px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.modal-close-btn_ed {
  position: absolute;
  top: 16px;
  right: 16px;
  background: none;
  border: none;
  font-size: 28px;
  cursor: pointer;
  color: #666;
  transition: color 0.2s;
}

.modal-close-btn_ed:hover {
  color: #000;
}

.modal-title_ed {
  font-size: 24px;
  font-weight: bold;
  color: #512967;
  margin-bottom: 24px;
  text-align: center;
}

.modal-body_ed {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 24px;
}

.modal-section_ed h3 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
  color: #333;
}

.disadvantages-list_ed {
  list-style: none;
  padding: 0;
}

.disadvantages-list_ed li {
  padding: 10px;
  margin-bottom: 8px;
  background: #ffe0e0;
  border-left: 4px solid #e53935;
  border-radius: 4px;
  color: #c62828;
  font-size: 14px;
}

.advantages-list_ed {
  list-style: none;
  padding: 0;
}

.advantages-list_ed li {
  padding: 10px;
  margin-bottom: 8px;
  background: #e8f5e9;
  border-left: 4px solid #43a047;
  border-radius: 4px;
  color: #2e7d32;
  font-size: 14px;
}

.divider_ed {
  grid-column: 1 / -1;
  height: 2px;
  background: linear-gradient(90deg, transparent, #ddd, transparent);
}

.modal-close-action-btn_ed {
  width: 100%;
  padding: 12px 24px;
  background: #1e88e5;
  color: #ffffff;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s ease;
}

.modal-close-action-btn_ed:hover {
  background: #1565c0;
}

@media (max-width: 768px) {
  .modal-content_ed {
    padding: 24px;
  }

  .modal-body_ed {
    grid-template-columns: 1fr;
  }

  .modal-title_ed {
    font-size: 20px;
  }
}
.form-section_ed {
  padding: 16px;
  width: 100%;
  font-family: Arial, sans-serif;
}

.radio-group_ed {
  display: flex;
  gap: 20px;
  margin-top: 6px;
}

.section-label_ed {
  font-weight: 600;
  display: block;
  margin-bottom: 10px;
}

.bank-section_ed {
  margin-top: 16px;
}

.bank-card_ed {
  border: 1px solid #ddd;
  background: #f9f9f9;
  border-radius: 6px;
  padding: 16px;
  margin-bottom: 16px;
}

.bank-row_ed {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

.bank-row_ed input {
  flex: 1;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.remove-btn_ed {
  background: #e53935;
  color: #fff;
  border: none;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
}

.remove-btn_ed:hover {
  background: #c62828;
}

.info-box_ed {
  background: #e8f5e9;
  border-left: 4px solid #43a047;
  padding: 12px;
  margin: 10px 0;
}

.sanction-box_ed {
  border: 1px solid #ddd;
  background: #fff;
  padding: 12px;
  border-radius: 6px;
  margin-top: 10px;
}

.form-grid_ed {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
}

.form-grid_ed input {
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.benefits-box_ed {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

.disadvantages_ed{
  flex: 1;
  padding: 10px;
  border-radius: 6px;
  color: white;
   background: rgb(135, 39, 39);

}

.advantages_ed {
  flex: 1;
  padding: 10px;
  border-radius: 6px;
  color:white;
  background: rgb(37, 115, 67);
}

.add-btn_ed {
  background: #1e88e5;
  color: #fff;
  border: none;
  padding: 10px 16px;
  border-radius: 4px;
  cursor: pointer;
}

.add-btn_ed:hover {
  background: #1565c0;
}



@media (max-width: 768px) {
  .further-education-fields {
    grid-template-columns: 1fr;
  }
}



after change:
import React, { useState } from 'react';
import {
  courseStartQuarters,
  courseStartYears,
  degrees,
  fieldsOfInterest,
  admissionStatuses,
  allCountries,
  universities
} from '../../constants';
import './FurtherEducationSection.css';

const FurtherEducationSection = ({
  lead,
  setLead,
  handleChange,
  handleDateChange,
  renderSelectField,
  renderAutocompleteField,
  handleShowPrimeBanks,
  primeBankList,
  fetchedForUniversity
}) => {
  const [showModal, setShowModal] = useState(false);
  const [selectedBankIndex, setSelectedBankIndex] = useState(null);

  const handleOpenModal = (index) => {
    setSelectedBankIndex(index);
    setShowModal(true);
  };

  const handleCloseModal = () => {
    setShowModal(false);
    setSelectedBankIndex(null);
  };

  const getModalContent = (bank) => {
    if (bank.loanSanctioned === false) {
      return {
        title: `Bank Details - ${bank.bankName}`,
        disadvantages: [
          'Longer processing time',
          'Higher interest rates',
          'Stricter documentation requirements',
          'Limited loan amount'
        ],
        advantages: [
          'Direct tie-ups for faster processing',
          'Expert guidance reducing rejection chances',
          'Dedicated loan advisor',
          'Better terms and conditions'
        ]
      };
    }
    return null;
  };

  return (
    <div className="section-block">
      <h1 className="ed-details-section-title">ðŸŽ“ Further Education Details</h1>

      <div className="further-education-fields">
        {renderSelectField("courseStartMonth", "Course Start Month", lead.courseStartMonth, handleChange, courseStartQuarters)}
        {renderSelectField("courseStartYear", "Course Start Year", lead.courseStartYear, handleChange, courseStartYears)}
        {renderSelectField("degree", "Degree", lead.degree, handleChange, degrees)}
        {renderSelectField("fieldOfInterest", "Field of Interest", lead.fieldOfInterest, handleChange, fieldsOfInterest)}
        {renderAutocompleteField("interestedCountries", "Interested Countries", lead.interestedCountries, handleChange, allCountries)}
        {renderSelectField("admissionStatus", "Admission Status", lead.admissionStatus, handleChange, admissionStatuses)}

        {lead.admissionStatus === 'Applied - No Admit Yet' && (
          <div className="date-field" style={{ width: '100%' }}>
            <label>Expected Admit Date</label>
            <input
              type="date"
              value={lead.expectedAdmitDate ? new Date(lead.expectedAdmitDate).toISOString().split('T')[0] : ''}
              onChange={(e) =>
                handleDateChange('expectedAdmitDate', e.target.value ? new Date(e.target.value) : null)
              }
            />
          </div>
        )}

        {lead.admissionStatus === 'Not Yet Applied' && (
          <div className="date-field" style={{ width: '100%' }}>
            <label>Expected Application Date</label>
            <input
              type="date"
              value={lead.expectedApplicationDate ? new Date(lead.expectedApplicationDate).toISOString().split('T')[0] : ''}
              onChange={(e) =>
                handleDateChange('expectedApplicationDate', e.target.value ? new Date(e.target.value) : null)
              }
            />
          </div>
        )}

        {renderAutocompleteField("admittedUniversities", "Admitted Universities", lead.admittedUniversities, handleChange, universities)}
      </div>

      <div className="form-section_ed">
  <fieldset>
    <legend>Has the student already approached any bank? *</legend>

    <div className="radio-group_ed">
      <label>
        <input
          type="radio"
          name="approachedAnyBank"
          value="true"
          checked={lead.approachedAnyBank === true}
          onChange={handleChange}
        />
        Yes
      </label>

      <label>
        <input
          type="radio"
          name="approachedAnyBank"
          value="false"
          checked={lead.approachedAnyBank === false}
          onChange={handleChange}
        />
        No
      </label>
    </div>
  </fieldset>

  {lead.approachedAnyBank && (
    <div className="bank-section_ed">
      <label className="section-label_ed">Approached Banks</label>

      {lead.approachedBanks.map((bank, index) => (
        <div key={index} className="bank-card_ed">

          <div className="bank-row_ed">
            <input
              type="text"
              placeholder="Bank Name"
              value={bank.bankName}
              onChange={(e) => {
                const newBanks = [...lead.approachedBanks];
                newBanks[index].bankName = e.target.value;
                setLead(prev => ({ ...prev, approachedBanks: newBanks }));
              }}
            />

            <button
              type="button"
              className="remove-btn_ed"
              onClick={() => {
                const newBanks = lead.approachedBanks.filter((_, i) => i !== index);
                setLead(prev => ({ ...prev, approachedBanks: newBanks }));
              }}
            >
              Remove
            </button>
          </div>

          <fieldset>
            <legend>Has the file been logged in?</legend>

            <div className="radio-group_ed">
              <label>
                <input
                  type="radio"
                  name={`fileLoggedIn-${index}`}
                  value="true"
                  checked={bank.fileLoggedIn === true}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].fileLoggedIn = e.target.value === 'true';
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                Yes
              </label>

              <label>
                <input
                  type="radio"
                  name={`fileLoggedIn-${index}`}
                  value="false"
                  checked={bank.fileLoggedIn === false}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].fileLoggedIn = e.target.value === 'true';
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                No
              </label>
            </div>
          </fieldset>

          {/* {bank.fileLoggedIn === false && (
            <div className="info-box_ed">
              <h4>Advantages of going with Justap:</h4>
              <ul>
                <li>Direct tie-ups for faster processing</li>
                <li>Expert guidance reducing rejection chances</li>
                <li>Dedicated loan advisor</li>
              </ul>
            </div>
          )} */}

          {bank.fileLoggedIn === true && (
            <fieldset>
              <legend>Has the loan been sanctioned?</legend>

              <div className="radio-group_ed">
                <label>
                  <input
                    type="radio"
                    name={`loanSanctioned-${index}`}
                    value="true"
                    checked={bank.loanSanctioned === true}
                    onChange={(e) => {
                      const newBanks = [...lead.approachedBanks];
                      newBanks[index].loanSanctioned = e.target.value === 'true';
                      setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                    }}
                  />
                  Yes
                </label>

                <label>
                  <input
                    type="radio"
                    name={`loanSanctioned-${index}`}
                    value="false"
                    checked={bank.loanSanctioned === false}
                    onChange={(e) => {
                      const newBanks = [...lead.approachedBanks];
                      newBanks[index].loanSanctioned = e.target.value === 'true';
                      setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                    }}
                  />
                  No
                </label>
              </div>
            </fieldset>
          )}

          {bank.loanSanctioned === true && (
            <div className="sanction-box_ed">
              <h4>Sanction Details</h4>

              <div className="form-grid_ed">
                <input
                  type="number"
                  placeholder="Loan Amount"
                  value={bank.sanctionDetails?.loanAmount || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, loanAmount: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="number"
                  step="0.01"
                  placeholder="Rate of Interest (%)"
                  value={bank.sanctionDetails?.rateOfInterest || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, rateOfInterest: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="number"
                  placeholder="Processing Fee"
                  value={bank.sanctionDetails?.processingFee || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, processingFee: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="text"
                  placeholder="Insurance"
                  value={bank.sanctionDetails?.insurance || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, insurance: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="text"
                  placeholder="PSM"
                  value={bank.sanctionDetails?.psm || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, psm: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
                <input
                  type="text"
                  placeholder="Co-Applicant"
                  value={bank.sanctionDetails?.coApplicant || ''}
                  onChange={(e) => {
                    const newBanks = [...lead.approachedBanks];
                    newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, coApplicant: e.target.value };
                    setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                  }}
                />
              </div>

              <fieldset>
                <legend style={{paddingTop: '10px'}}>Type of Loan</legend>
                <div className="radio-group_ed">
                  <label>
                    <input
                      type="radio"
                      name={`typeOfLoan-${index}`}
                      value="secured"
                      checked={bank.sanctionDetails?.typeOfLoan === 'secured'}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, typeOfLoan: e.target.value };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    Secured Loan
                  </label>
                  <label>
                    <input
                      type="radio"
                      name={`typeOfLoan-${index}`}
                      value="unsecured"
                      checked={bank.sanctionDetails?.typeOfLoan === 'unsecured'}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, typeOfLoan: e.target.value };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    Unsecured Loan
                  </label>
                </div>
              </fieldset>

              <fieldset>
                <legend style={{paddingTop: '10px'}}>PF Paid?</legend>
                <div className="radio-group_ed">
                  <label>
                    <input
                      type="radio"
                      name={`pfPaid-${index}`}
                      value="true"
                      checked={bank.sanctionDetails?.pfPaid === true}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, pfPaid: e.target.value === 'true' };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    Yes
                  </label>
                  <label>
                    <input
                      type="radio"
                      name={`pfPaid-${index}`}
                      value="false"
                      checked={bank.sanctionDetails?.pfPaid === false}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, pfPaid: e.target.value === 'true' };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    No
                  </label>
                </div>
              </fieldset>

              <fieldset>
                <legend style={{paddingTop: '10px'}}>Disbursement Done?</legend>
                <div className="radio-group_ed">
                  <label>
                    <input
                      type="radio"
                      name={`disbursementDone-${index}`}
                      value="true"
                      checked={bank.sanctionDetails?.disbursementDone === true}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, disbursementDone: e.target.value === 'true' };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    Yes
                  </label>
                  <label>
                    <input
                      type="radio"
                      name={`disbursementDone-${index}`}
                      value="false"
                      checked={bank.sanctionDetails?.disbursementDone === false}
                      onChange={(e) => {
                        const newBanks = [...lead.approachedBanks];
                        newBanks[index].sanctionDetails = { ...newBanks[index].sanctionDetails, disbursementDone: e.target.value === 'true' };
                        setLead(prev => ({ ...prev, approachedBanks: newBanks }));
                      }}
                    />
                    No
                  </label>
                </div>
              </fieldset>
            </div>
          )}

          {bank.loanSanctioned === false && (
            <div className="button-container_ed">
              <button
                type="button"
                className="modal-trigger-btn_ed"
                onClick={() => handleOpenModal(index)}
              >
                âœ¨ Open Details
              </button>
            </div>
          )}

        </div>
      ))}

      <button
        type="button"
        className="add-btn_ed"
        onClick={() => {
          const newBanks = [
            ...lead.approachedBanks,
            { bankName: '', fileLoggedIn: false, loanSanctioned: false, sanctionDetails: {} }
          ];
          setLead(prev => ({ ...prev, approachedBanks: newBanks }));
        }}
      >
        + Add Bank
      </button>
    </div>
  )}
</div>

          


      <div className="info-box">
        Enter a university and click the button below to check the prime university list.
      </div>

      <button className="prime-btn" onClick={handleShowPrimeBanks}>
        PRIME UNIVERSITY LIST
      </button>

      {primeBankList.length > 0 && (
        <div className="table-wrapper">
          <h4>Prime Banks for "{fetchedForUniversity}"</h4>

          <table>
            <thead>
              <tr>
                <th>Bank Name</th>
                <th>Max Loan Amount</th>
              </tr>
            </thead>
            <tbody>
              {primeBankList.map((bank, index) => (
                <tr key={index}>
                  <td>{bank.bankName}</td>
                  <td className="amount">{bank.maxLoanAmount}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      )}

      {showModal && selectedBankIndex !== null && getModalContent(lead.approachedBanks[selectedBankIndex]) && (
        <div className="modal-overlay_ed" onClick={handleCloseModal}>
          <div className="modal-content_ed" onClick={(e) => e.stopPropagation()}>
            <button className="modal-close-btn_ed" onClick={handleCloseModal}>
              âœ•
            </button>

            <h2 className="modal-title_ed">
              {getModalContent(lead.approachedBanks[selectedBankIndex]).title}
            </h2>

            <div className="modal-body_ed">
              <div className="modal-section_ed">
                <h3>Disadvantages of {lead.approachedBanks[selectedBankIndex].bankName}</h3>
                <ul className="disadvantages-list_ed">
                  {getModalContent(lead.approachedBanks[selectedBankIndex]).disadvantages.map((item, i) => (
                    <li key={i}>{item}</li>
                  ))}
                </ul>
              </div>

              <div className="divider_ed"></div>

              <div className="modal-section_ed">
                <h3>Advantages of JTC</h3>
                <ul className="advantages-list_ed">
                  {getModalContent(lead.approachedBanks[selectedBankIndex]).advantages.map((item, i) => (
                    <li key={i}>{item}</li>
                  ))}
                </ul>
              </div>
            </div>

            <button className="modal-close-action-btn_ed" onClick={handleCloseModal}>
              Close
            </button>
          </div>
        </div>
      )}
    </div>
  );
};



export default FurtherEducationSection;
.section-block {
  padding: 16px;
  background: #ffffff;
  border-radius: 8px;
}

.ed-details-section-title {
  font-size: 24px;
  font-weight: bold;
  color: #512967;
  margin-bottom: 16px;
}

.further-education-fields {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 12px;
}

.date-field label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 4px;
}

.date-field input {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

.info-box {
  margin-top: 16px;
  padding: 12px;
  background: #ebf5ff;
  border-left: 4px solid #3b82f6;
  color: #1e40af;
  border-radius: 6px;
}

.prime-btn {
  margin-top: 12px;
  padding: 10px 16px;
  background: #f59e0b;
  color: #ffffff;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
}

.prime-btn:hover {
  background: #d97706;
}

.table-wrapper {
  margin-top: 20px;
}

.table-wrapper h4 {
  margin-bottom: 10px;
  font-size: 18px;
}

.table-wrapper table {
  width: 100%;
  border-collapse: collapse;
}

.table-wrapper th,
.table-wrapper td {
  padding: 10px;
  border: 1px solid #ddd;
  text-align: left;
}

.table-wrapper th {
  background: #f9fafb;
  font-weight: 600;
}

.amount {
  text-align: right;
}


/* Force autocomplete fields to match grid width ONLY in this section */

.further-education-fields > div {
  width: 100%;
}

.further-education-fields .MuiAutocomplete-root {
  width: 100%;
}

.further-education-fields .MuiFormControl-root {
  width: 100%;
}

.benifits_boxes{
   display:flex;
   flex-direction:row;
}

.button-container_ed {
  margin-top: 12px;
  display: flex;
  justify-content: center;
}

/* Blinking and Moving Button */
@keyframes blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.4;
  }
}

@keyframes moveUpDown {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.modal-trigger-btn_ed {
  background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
  color: #ffffff;
  border: 2px solid #f59e0b;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 700;
  font-size: 16px;
  cursor: pointer;
  animation: blink 1.2s ease-in-out infinite, moveUpDown 1.5s ease-in-out infinite;
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
  transition: all 0.3s ease;
}

.modal-trigger-btn_ed:hover {
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.6);
  transform: scale(1.05);
}

/* Modal Overlay */
.modal-overlay_ed {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Modal Content */
.modal-content_ed {
  background: #ffffff;
  border-radius: 12px;
  padding: 32px;
  max-width: 800px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.modal-close-btn_ed {
  position: absolute;
  top: 16px;
  right: 16px;
  background: none;
  border: none;
  font-size: 28px;
  cursor: pointer;
  color: #666;
  transition: color 0.2s;
}

.modal-close-btn_ed:hover {
  color: #000;
}

.modal-title_ed {
  font-size: 24px;
  font-weight: bold;
  color: #512967;
  margin-bottom: 24px;
  text-align: center;
}

.modal-body_ed {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 24px;
}

.modal-section_ed h3 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
  color: #333;
}

.disadvantages-list_ed {
  list-style: none;
  padding: 0;
}

.disadvantages-list_ed li {
  padding: 10px;
  margin-bottom: 8px;
  background: #ffe0e0;
  border-left: 4px solid #e53935;
  border-radius: 4px;
  color: #c62828;
  font-size: 14px;
}

.advantages-list_ed {
  list-style: none;
  padding: 0;
}

.advantages-list_ed li {
  padding: 10px;
  margin-bottom: 8px;
  background: #e8f5e9;
  border-left: 4px solid #43a047;
  border-radius: 4px;
  color: #2e7d32;
  font-size: 14px;
}

.divider_ed {
  grid-column: 1 / -1;
  height: 2px;
  background: linear-gradient(90deg, transparent, #ddd, transparent);
}

.modal-close-action-btn_ed {
  width: 100%;
  padding: 12px 24px;
  background: #1e88e5;
  color: #ffffff;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s ease;
}

.modal-close-action-btn_ed:hover {
  background: #1565c0;
}

@media (max-width: 768px) {
  .modal-content_ed {
    padding: 24px;
  }

  .modal-body_ed {
    grid-template-columns: 1fr;
  }

  .modal-title_ed {
    font-size: 20px;
  }
}
.form-section_ed {
  padding: 16px;
  width: 100%;
  font-family: Arial, sans-serif;
}

.radio-group_ed {
  display: flex;
  gap: 20px;
  margin-top: 6px;
}

.section-label_ed {
  font-weight: 600;
  display: block;
  margin-bottom: 10px;
}

.bank-section_ed {
  margin-top: 16px;
}

.bank-card_ed {
  border: 1px solid #ddd;
  background: #f9f9f9;
  border-radius: 6px;
  padding: 16px;
  margin-bottom: 16px;
}

.bank-row_ed {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

.bank-row_ed input {
  flex: 1;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.remove-btn_ed {
  background: #e53935;
  color: #fff;
  border: none;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
}

.remove-btn_ed:hover {
  background: #c62828;
}

.info-box_ed {
  background: #e8f5e9;
  border-left: 4px solid #43a047;
  padding: 12px;
  margin: 10px 0;
}

.sanction-box_ed {
  border: 1px solid #ddd;
  background: #fff;
  padding: 12px;
  border-radius: 6px;
  margin-top: 10px;
}

.form-grid_ed {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
}

.form-grid_ed input {
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.add-btn_ed {
  background: #1e88e5;
  color: #fff;
  border: none;
  padding: 10px 16px;
  border-radius: 4px;
  cursor: pointer;
}

.add-btn_ed:hover {
  background: #1565c0;
}



@media (max-width: 768px) {
  .further-education-fields {
    grid-template-columns: 1fr;
  }
}

